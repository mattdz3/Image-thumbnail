"use strict";var Photo=Backbone.Model.extend({idAttribute:"_id",defaults:{caption:"",url:""},initialize:function(){this.on("change",function(){})}}),PhotoCollection=Backbone.Collection.extend({model:Photo,url:"http://tiny-pizza-server.herokuapp.com/collections/photos"}),ThumbnailView=Backbone.View.extend({className:"thumbnail",template:_.template($(".thumbnail-image").text()),events:{},initialize:function(){this.listenTo(this.model,"change",this.render),$(".container").append(this.el),this.render()},render:function(){var a=this.template(this.model.attributes);return this.$el.html(a),this},showDetailView:function(){}}),DetailView=Backbone.View.extend({className:"detail-pic",detailTemplate:_.template($(".detail-image").text()),events:{"click .add-photo":"editPhoto","click .add-caption":"addCaption","click .add-new-photo":"addPhoto"},initialize:function(){this.listenTo(getPhotos,"add",function(a){new ThumbnailView({model:a})}),$(".detail-container").prepend(this.el),this.render()},render:function(){var a=this.detailTemplate(this.model.attributes);return this.$el.html(a),this},addCaption:function(){this.model.set({caption:this.$el.find(".input-caption").val()}),getPhotos.add(this.model),this.model.save().done(function(){this.$el.find(".status").html("You added a new caption!")})},editPhoto:function(){this.model.set({url:this.$el.find(".input-photo").val()}),getPhotos.add(this.model),this.model.save().done(function(){this.$el.find(".status").html("You edited an image!")})}}),getPhotos=new PhotoCollection,Router=Backbone.Router.extend({routes:{"":"routerHome","photos/:id":"routerPhotos"},initialize:function(){getPhotos.fetch().done(function(){getPhotos.each(function(a){new ThumbnailView({model:a})}),detailPic=new DetailView({model:getPhotos.first()})}),console.log("WHEEE")},routerHome:function(){detailPic=new DetailView({model:getPhotos.get()})},routerPhotos:function(){}}),myRouter=new Router;Backbone.history.start();var addNewPhoto,detailPic,getPhotos=new PhotoCollection;getPhotos.fetch().done(function(){getPhotos.each(function(a){new ThumbnailView({model:a})}),detailPic=new DetailView({model:getPhotos.first()})});