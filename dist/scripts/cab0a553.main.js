"use strict";var Photo=Backbone.Model.extend({idAttribute:"_id",defaults:{caption:"",url:""},initialize:function(){this.on("change",function(){})}}),PhotoCollection=Backbone.Collection.extend({model:Photo,url:"http://tiny-pizza-server.herokuapp.com/collections/photos"}),ThumbnailView=Backbone.View.extend({className:"thumbnail",template:_.template($(".thumbnail-image").text()),events:{click:"showDetailView"},initialize:function(){this.listenTo(this.model,"change",this.render),$(".container").append(this.el),this.render()},render:function(){var a=this.template(this.model.attributes);return this.$el.html(a),this},showDetailView:function(){detailPic.remove(),detailPic=new DetailView({model:this.model})}}),DetailView=Backbone.View.extend({className:"detail-pic",detailTemplate:_.template($(".detail-image").text()),events:{"click .add-photo":"editPhoto","click .add-caption":"addCaption","click .add-new-photo":"addPhoto"},initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"add",this.render),$(".detail-container").prepend(this.el),this.render()},render:function(){var a=this.detailTemplate(this.model.attributes);return this.$el.html(a),this},addCaption:function(){this.model.set({caption:$(".input-caption").val()}),getPhotos.add(this.model).save()},editPhoto:function(){this.model.set({url:$(".input-photo").val()}),getPhotos.add(this.model),this.model.save()},addPhoto:function(){var a=new PhotoCollection;a.add({url:$(".input-new-photo").val()}).save()}}),addNewPhoto,detailPic,getPhotos=new PhotoCollection;getPhotos.fetch().done(function(){getPhotos.each(function(a){new ThumbnailView({model:a})}),detailPic=new DetailView({model:getPhotos.first()})});